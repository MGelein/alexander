function ce(e){return document.createElement(e)}function openDebugHTML(e){myWindow=window.open("data:text/html,"+encodeURIComponent(e),"_blank","width=400,height=300"),myWindow.focus()}function getAjaxRequest(e){try{var t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}}return t.open("POST","ajax.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=e,t}function newTextEditor(e){return editor=new nicEditor({buttonList:["bold","italic","underline","strikeThrough","subscript","superscript"]}),editor.panelInstance(e),editor}function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,a){e[n]=a});return e}function exitEditor(){index=window.location.href.indexOf("?"),window.location=window.location.href.substring(0,index)}function getRange(){return r=null,tmp=ce("span"),window.getSelection&&window.getSelection().getRangeAt?(r=window.getSelection().getRangeAt(0),tmp.appendChild(r.extractContents()),tmp.innerHTML):document.selection&&document.selection.createRange?(r=document.selection.createRange(),tmp.appendChild(r.extractContents()),tmp.innerHTML):null}function clearSelection(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function createText(){msg="AJAX=true&newText="+!0,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&(document.location=this.responseText)}),req.send(msg)}function loadTextOverview(){updateTextOverview()}function updateTextOverview(){var e=$("#textOrder").get(0);$("#textFilter").get(0);msg="AJAX=true&loadTextOverview="+e.value+"&textFilter="+textFilter.value,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&($("#textOverview").get(0).innerHTML=this.responseText)}),req.send(msg)}function deleteFile(e){alert(e)}function insertMarkup(){range=getRange(),replaceSelectionWithHtml("<span contenteditable='false' id='markupStart' class='handle redHandle'></span>"+range+"<span id='markupEnd' contenteditable='false' class='handle redHandle'></span>"),requestMarkupID()}function moveMarkup(e){mS=$("#"+e+"_start").get(0),mE=$("#"+e+"_end").get(0),mS.parentNode.removeChild(mS),mE.parentNode.removeChild(mE),tmp=ce("p"),tmp.appendChild(mS),startString=tmp.innerHTML,tmp.removeChild(mS),tmp.appendChild(mE),endString=tmp.innerHTML,replaceSelectionWithHtml(startString+getRange()+endString),mS=$("#"+e+"_start").get(0),mE=$("#"+e+"_end").get(0),activateHandle(mS),activateHandle(mE)}function saveText(e){textContent=nicEditors.findEditor("textEditor").getContent(),authorName=$("#authorField").val(),textName=$("#textNameField").val(),textTitle=$("#titleField").val(),locusFrom=$("#locusFromField").val(),locusTo=$("#locusToField").val(),textStatus=$("#textStatusSelect").val(),textContent=textContent.replace(/&nbsp;/g," "),msg="AJAX=true&saveTextContent=true&textContent="+textContent+"&authorName="+authorName.toLowerCase()+"&textName="+textName+"&textTitle="+textTitle+"&locusF="+locusFrom+"&locusT="+locusTo+"&checkIn="+e+"&textStatusSelect="+textStatus,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&("OK"==this.responseText?e&&exitEditor():"DB_ERR"==this.responseText?alert("A database error occured. Saving has failed. Try again later."):"AUTH_RES_ERR"==this.responseText?alert("A result error has occured. This authorName is not yet registered. And you don't have the necessary privileges to register a new author"):alert(this.responseText))}),req.send(msg)}function loadMarkup(e){var t=$("#holder_"+e).get(0);void 0==t?(msg="AJAX=true&loadMarkup="+e,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&(addColumn(this.responseText),activateHandles(),clearSelection())}),req.send(msg)):-1==t.className.indexOf("alreadyLoaded")&&(t.className=t.className+" alreadyLoaded",setTimeout(function(){t.className=t.className.replaceAll("alreadyLoaded","")},1e3))}function loadText(){msg="AJAX=true&loadText="+getUrlVars().txtID,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&(nicEditors.findEditor("textEditor").setContent(this.responseText),activateHandles(),setTimeout(convertNote,1e3))}),req.send(msg)}function convertNote(){note=document.getElementsByClassName("annotation")[0],null!=note&&(className="handle ",note.src.endsWith("critBut.png")?className+="blueHandle":note.src.endsWith("transBut.png")?className+="redHandle":note.src.endsWith("fontBut.png")?className+="greenHandle":note.src.endsWith("noteBut.png")&&(className+="yellowHandle"),mS=ce("span"),mS.setAttribute("contenteditable",!1),mS.className=className,activateHandle(mS),mE=ce("span"),mE.setAttribute("contenteditable",!1),mE.className=className,activateHandle(mE),note.parentNode.insertBefore(mE,note.nextSibling),note.parentNode.replaceChild(mS,note),msg="AJAX=true&convertNote="+note.id,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&(id=this.responseText,mS.id=id+"_start",mE.id=id+"_end",mS.title=mS.innerHTML=id,mE.title=mE.innerHTML=id,convertNote())}),req.send(msg))}function requestMarkupID(){msg="AJAX=true&requestMarkupID="+!0,req=getAjaxRequest(function(){4==this.readyState&&200==this.status&&null!=this.responseText&&(objS=$("#markupStart").get(0),objE=$("#markupEnd").get(0),objS.id=this.responseText+"_start",objE.id=this.responseText+"_end",objS.innerHTML=objE.innerHTML=this.responseText,objS.title=objE.title=this.responseText,activateHandle(objS),activateHandle(objE),loadMarkup(this.responseText))}),req.send(msg)}function highlightMarkup(e,t,n){if(-1!=e&&(void 0==n&&(n=!1),start=$("#"+e+"_start").get(0),end=$("#"+e+"_end").get(0),start&&end))if(t)void 0!=(a=$("#holder_"+e).get(0))&&n&&-1==a.className.indexOf("highlightMarkup")&&(a.className=a.className+" highlightMarkup"),start.className=start.className+" handleSelected",end.className=end.className+" handleSelected";else{var a=$("#holder_"+e).get(0);void 0!=a&&(a.className=a.className.replaceAll("highlightMarkup","")),start.className=start.className.replaceAll("handleSelected",""),end.className=end.className.replaceAll("handleSelected","")}}function activateHandles(){handles=document.getElementsByClassName("handle");var e,t=handles.length;for(e=0;e<t;e++)activateHandle(handles[e])}function activateHandle(e){e.className=e.className.replaceAll("handleSelected",""),e.onmousedown=function(){loadedMarkup=this,loadMarkup(this.innerHTML)},e.onmouseover=function(){highlightMarkup(this.title,!0,!0)},e.onmouseout=function(){highlightMarkup(this.title,!1)}}function replaceSelectionWithHtml(e){var t,e;if(window.getSelection&&window.getSelection().getRangeAt){(t=window.getSelection().getRangeAt(0)).deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var a,i=document.createDocumentFragment();a=n.firstChild;)i.appendChild(a);t.insertNode(i)}else document.selection&&document.selection.createRange&&(t=document.selection.createRange()).pasteHTML(e)}function removeColumn(e){var t=$("#holder_"+e).get(0);if(void 0!=t)for(t.parentNode.parentNode.removeChild(t.parentNode),editorPanes=document.getElementsByClassName("editorHolder"),prevWidth=12,colWidth=12,editorPanes.length>3?(prevWidth=3,colWidth=3):3==editorPanes.length?(prevWidth=3,colWidth=4):2==editorPanes.length?(prevWidth=4,colWidth=6):1==editorPanes.length&&(prevWidth=6,colWidth=12),i=0,max=editorPanes.length,i=0;i<max;i++)editorPanes[i].className=editorPanes[i].className.replace("col-sm-"+prevWidth,"col-sm-"+colWidth)}function addColumn(response){for(editorPanes=document.getElementsByClassName("editorHolder"),prevWidth=12,colWidth=12,editorPanes.length>3?(prevWidth=3,colWidth=3):3==editorPanes.length?(prevWidth=4,colWidth=3):2==editorPanes.length?(prevWidth=6,colWidth=4):1==editorPanes.length&&(prevWidth=12,colWidth=6),i=0,max=editorPanes.length,i=0;i<max;i++)editorPanes[i].className=editorPanes[i].className.replace("col-sm-"+prevWidth,"col-sm-"+colWidth);resizeEditors(),col=ce("div"),col.className="col-sm-"+colWidth+" editorHolder",col.innerHTML=response;var editorRow=$("#markupRow").get(0);editorRow.appendChild(col),addedScript=$("#loadScript").get(0),eval(addedScript.innerHTML),addedScript.parentNode.removeChild(addedScript)}function resizeEditors(){$(".nicEdit-panelContain").parent().width("100%"),$(".nicEdit-panelContain").parent().next().width("100%"),$(".nicEdit-panelContain").width("100%"),$(".nicEdit-panelContain").next().width("100%")}function changeHTML(){for(p=$("pass");p.firstChild;)p.removeChild(p.firstChild);f=ce("form"),f.setAttribute("class","form-horizontal"),f.setAttribute("action","index.php"),f.setAttribute("method","post"),ul=ce("ul"),li1=ce("li"),li2=ce("li"),li3=ce("li"),li4=ce("li"),tf1=ce("input"),tf2=ce("input"),tf3=ce("input"),but=ce("input"),but.setAttribute("type","submit"),but.setAttribute("class","btn btn-primary"),but.setAttribute("value","Change Password"),tf1.setAttribute("type","password"),tf1.setAttribute("name","password"),tf1.setAttribute("placeholder","New Password"),tf1.setAttribute("class","form-control"),tf1.setAttribute("style","margin-top: 2px;"),tf2.setAttribute("type","password"),tf2.setAttribute("name","passwordCheck"),tf2.setAttribute("class","form-control"),tf2.setAttribute("placeHolder","New Password (Repeat)"),tf2.setAttribute("style","margin-top: 2px;"),tf3.setAttribute("type","password"),tf3.setAttribute("name","passwordOld"),tf3.setAttribute("placeHolder","Old Password"),tf3.setAttribute("class","form-control"),ul.appendChild(li4),ul.appendChild(li1),ul.appendChild(li2),ul.appendChild(li3),li4.appendChild(tf3),li1.appendChild(tf1),li2.appendChild(tf2),li3.appendChild(but),f.appendChild(ul),p.appendChild(f)}String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},document.onkeydown=function(e){if(188==e.keyCode){if(e.shiftKey)return document.execCommand("insertHTML",!1,"‹"),!1}else if(190==e.keyCode&&e.shiftKey)return document.execCommand("insertHTML",!1,"›"),!1},document.addEventListener("paste",function(e){console.log(e.target.id);var t=void 0;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),e.preventDefault(),e.target.value="",document.execCommand("insertHTML",!1,t),!1});var recentTyped=!1;newTextEditor("editorialComments"),newTextEditor("textEditor"),loadText();
//# sourceMappingURL=../path/to/sourcemap.map